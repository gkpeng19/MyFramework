<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="css/icon.custom.css" />
    <link rel="stylesheet" type="text/css" href="css/page.css" />
    <script type="text/javascript" charset="utf-8">
        mui.init();
    </script>
</head>
<body>
    <header class="mui-bar mui-bar-nav top-bar">
        <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
        <h1 class="mui-title" id="title">旅居佳地</h1>
    </header>
    <div class="mui-content">
        <ul class="mui-table-view" id="traveList">
        </ul>
    </div>
    <nav class="mui-bar mui-bar-tab bottom-bar">
        <a class="mui-tab-item mui-active">
            <span class="mui-icon iconfont icon-dingwei"></span>
            <span class="mui-tab-label">旅居首页</span>
        </a>
        <a class="mui-tab-item">
            <span class="mui-icon iconfont icon-youjian"></span>
            <span class="mui-tab-label">信息咨询</span>
        </a>
        <a class="mui-tab-item">
            <span class="mui-icon iconfont icon-dianhua"></span>
            <span class="mui-tab-label">电话咨询</span>
        </a>
        <a class="mui-tab-item">
            <span class="mui-icon iconfont icon-qq"></span>
            <span class="mui-tab-label">QQ客服</span>
        </a>
    </nav>
    <script type="text/javascript" src="js/GOMFrameWork.js"></script>
    <script type="text/javascript" charset="UTF-8">
        function loadValliges(page) {
            mui.getJSON(getUrl("/Phone/LoadAllValliages"), { page: page }, function (r) {
                var list = toJsResult(r.Data);
                var html = "";
                for (var i = 0; i < list.length; ++i) {
                    html += getListItem(list[i].ID,list[i].ImgName_G,list[i].DPanel_G,list[i].Name);
                }
                document.getElementById("traveList").innerHTML=html;
            });
        }
        
        function loadTraveGuide(page){
        	document.getElementById("title").innerText="旅居资讯";
        	mui.getJSON(getUrl("/Phone/LoadTraveGuides"), { page: page }, function (r) {
                var list = toJsResult(r.Data);
                var html = "";
                for (var i = 0; i < list.length; ++i) {
                    html += getListItem(list[i].ID,list[i].TitleImg,list[i].Title,list[i].AContent);
                }
                document.getElementById("traveList").innerHTML=html;
            });
        }
        
        function loadMemberBenefit(page){
        	document.getElementById("title").innerText="得天独厚";
        	mui.getJSON(getUrl("/Phone/LoadMemberBenefit"), { page: page }, function (r) {
                var list = toJsResult(r.Data);
                var html = "";
                for (var i = 0; i < list.length; ++i) {
                    html += getListItem(list[i].ID,list[i].ImgName_G,list[i].DPanel_G,list[i].Name);
                }
                document.getElementById("traveList").innerHTML=html;
            });
        }
        
        function loadMemberService(page){
        	document.getElementById("title").innerText="旅居尊享";
        	mui.getJSON(getUrl("/Phone/LoadMemberService"), { page: page }, function (r) {
                var list = toJsResult(r.Data);
                var html = "";
                for (var i = 0; i < list.length; ++i) {
                    html += getListItem(list[i].ID,list[i].ImgName_G,list[i].DPanel_G,list[i].Name);
                }
                document.getElementById("traveList").innerHTML=html;
            });
        }
        
        var ptype=getUrlParam("ptype");
       
        function initPage(topage){
		    switch (ptype){
		    	case "1":
		    		loadValliges(topage);
		    		break;
		    		case "2":
		    		loadTraveGuide(topage);
		    		break;
		    		case "3":
		    		loadMemberBenefit(topage);
		    		break;
		    		case "4":
		    		loadMemberService(topage);
		    		break;
		    	default:
		    		break;
		    }
        }
        
        initPage(1);
        
		function getListItem(id,imgpath,name,description){
			return '<li class="mui-table-view-cell"><a class="mui-navigate-right" href="ArticleDetail.html?ptype='+ptype+'&vid='+id+'"><img style="width:42px;" class="mui-media-object mui-pull-left" src="' + getUrl(imgpath) + '?size=42"><div class="mui-media-body">' + description + '<p class="mui-ellipsis">旅居地-' + name + '</p></div></a></li>';
		}
    </script>
</body>
</html>