@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>
<table style="height: 500px;" id="app_dg">
    <thead>
        <tr>
            <th data-options="field:'ScriptStatus',resizable:false" width="135">ScriptStatus</th>
            <th data-options="field:'AppID',resizable:false" width="70">AppID</th>
            <th data-options="field:'AppName',width:'30%'">AppName</th>
            <th data-options="field:'Language',resizable:false" width="110">Region</th>
            <th data-options="field:'OSName',resizable:false" width="110">OSName</th>
            <th data-options="field:'Build',resizable:false" width="70">Build</th>
            <th data-options="field:'Platform',resizable:false" width="80">Platform</th>
            <th data-options="field:'StatusID',resizable:false,formatter:appStatusFormatter" width="70">Status</th>
            <th data-options="field:'row',formatter:appActionFormatter">Triage</th>
        </tr>
    </thead>
</table>
<div id="dg_toolbar" style="padding: 5px; height: auto;">
    <label class="dg_slab">Status：</label>
    <input class="easyui-combobox" data-options="valueField:'value',textField:'text',data:[{text:'All',value:0},{text:'Fail',value:2},{text:'Pass',value:1}]" panelheight="auto" name="statusid" />
    <label class="dg_slab">Region：</label>
    <input id="cbx_language" class="easyui-combobox" data-options="valueField:'value',textField:'text'" panelheight="auto" name="language" style="width: 150px;" />
    <label class="dg_slab">OSName：</label>
    <input id="cbx_osname" class="easyui-combobox" data-options="valueField:'value',textField:'text'" panelheight="auto" name="osname" />
    <label class="dg_slab">Platform：</label>
    <input class="easyui-combobox" data-options="valueField:'value',textField:'text',data:[{text:'All',value:'0'},{text:'X86',value:'X86'},{text:'AMD64',value:'AMD64'}]" panelheight="auto" name="platform" />
    <a href="#" class="easyui-linkbutton" iconcls="icon-search" onclick="loadDataGrid(1)">Search</a>
</div>

<div id="div_triage" style="width: 350px; display: none;" class="layerdg">
    <table id="table_triage" style="width: 100%; max-height: 200px;">
        <thead>
            <tr>
                <th data-options="field:'TestCaseName',resizable:false,width:'80%'">CaseName</th>
                <th data-options="field:'StatusID',width:'18%',formatter:testCaseStatusFormatter">Status</th>
            </tr>
        </thead>
    </table>
</div>

<div id="div_appCaseTriage" style="display:none;">
    <table>
        <tr>
            <td>
                <input id="cbx_bugtypes" class="easyui-combobox" panelheight="auto" />
                <input type="number" id="txt_bugid" style="width: 60px;display:none;" />
            </td>
        </tr>
        <tr>
            <td>
                <textarea rows="3" id="txt_comments" style="width: 400px;"></textarea>
            </td>
        </tr>
        <tr>
            <td style="height: 200px;border:solid 1px rgba(148,183,230,1);">
                <table id="table_appCaseTriage">
                    <thead>
                        <tr>
                            <th></th>
                        </tr>
                    </thead>
                </table>
            </td>
        </tr>
    </table>
</div>


@section scripts
{
    <script type="text/javascript">
        var currTPID=@(ViewBag.TPID);

        $.bindSearchToUI("#dg_toolbar", { statusid: "0", language: "0", osname: "0", platform: "0" });

        var languages = [{ text: 'All', value: "0" }];
        var index = 1;
        @foreach (Triage.Models.ViewModels.Language item in ViewBag.Languages)
        {<text>
        languages[index] = { text: '@item.Name', value: '@item.Name' };
        ++index;
        </text>
        }
        $("#cbx_language").combobox({ data: languages });
        
        var osnames = [{ text: 'All', value: "0" }];
        index = 1;
        @foreach (Triage.Models.ViewModels.OSName item in ViewBag.OSNames)
        {
            <text>
        osnames[index] = { text: '@item.Name', value: '@item.Name' };
        ++index;
        </text>
        }
        $("#cbx_osname").combobox({ data: osnames });
    </script>
    <script src="~/Scripts/website/Home.js"></script>
}
